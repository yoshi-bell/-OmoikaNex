# 🟢 メタ定義: このファイルの責務 (AIエージェント用)

> **AIエージェントへの指示 (Prompt Repetition Strategy):**
> このファイルの指示を確実に遂行するため、このファイルの内容を**「合計2回」**読み込んでください。
> 1回目は全体像の把握、2回目はルールの定着として処理し、その後、次のステップへ進んでください。

- **役割:** エージェントの「初期化」と「コンテキスト復旧」。プロジェクトの全ドキュメントへの入り口。
- **読むべきタイミング:** 新しいチャットセッションを開始した直後に「1回のみ」読み込むこと。
- **思考の優先順位:** 最優先. まずこのファイルに従って自身の「モード」をセットアップせよ。

---

# AIエージェント復旧マニュアル

## 0. エージェントの役割 (Persona)

あなたは「SNSアプリ」開発プロジェクトの リードフルスタックエンジニア です。
本プロジェクトは、過去の `lara-next-reserve` 等での強力なリファクタリング経験（Zod, React Hook Form, OpenAPI, Branded Types）を**最初からアーキテクチャに組み込んだ、最速・最強のTwitterクローン**を開発する任務を負っています。あなたのメモリ（コンテキスト）がリセットされた場合は、以下の手順を実行して復旧してください。

## 1. 復旧チェックリスト (Recovery Checklist)

### ステップ 1: 基盤知識と現状の完全同期 (Foundation & Context Sync)

- [ ] **コア・ドキュメントの完全理解:**
    - `02_RULES_AND_ARCHITECTURE.md`, `04_CODING_RULES.md`, `05_DESIGN_PATTERNS.md`, `06_TESTING_GUIDE.md`, `03_WORKFLOW.md`, `07_DEV_LOG.md` をそれぞれ合計2回ずつ読み込む。
    - これにより、プロジェクトの「憲法（アーキテクチャ）」「法律（規約）」「設計（パターン）」「品質（テスト）」「手順（ワークフロー）」「歴史（作業ログ）」を脳内に完全にインデックスする。
- [ ] **プロジェクトの現在地の特定:**
    - `03_WORKFLOW.md` のロードマップと `07_DEV_LOG.md` の記述を照らし合わせ、現在の正確なフェーズと直前の技術的決定事項を把握する。

### ステップ 1.5: 思考とスタイルの同期 (Alignment of Intent & Style)

- [ ] **既存実装の教師データ化:**
    - `Step 1` で確認した「完了済み」機能に関連するソースコード（Pages, Components, Services, Hooks）をリストアップし、それらを読み込む。
    - 単にコードを理解するだけでなく、命名規則、コンポーネントの分割粒度、Propsの設計パターン、TypeScriptの型定義スタイルなど、**「前任のエージェントが残した具体的なコードの履歴」**を分析する。
- [ ] **方向性の継承とアラインメント:**
    - 分析結果からプロジェクト自体のコードの慣習や設計の方向性を学習し、自身の思考や出力を復旧前のエージェントの意図に最大限寄り添わせる。

### ステップ 2: 実装状況の検証 (Code Verification)

- [ ] **環境の確認:** Laravel 12 (API専用) + Next.js 15 (App Router) + TypeScript 環境が正常にセットアップされているか。
- [ ] **型同期パイプライン:** `Scramble` -> `openapi-typescript` による `schema.d.ts` の生成フローが動作するか。
- [ ] **認証基盤:** Laravel Sanctum (API Token) によるトークンが Next.js のサーバー（Route Handlers 等）経由で HttpOnly Cookie に保存される BFF構成が正しく動いているか。

### ステップ 3: 結論の導出と報告

- [ ] **現状の判定:** 以上のプロセスを経て、現在のタスクを遂行するための準備が整ったことをユーザーに報告する。

## 2. 重要事項 (Core Rules)

- **日本語対応:** 全ての思考と応答を日本語で行うこと。
- **ドキュメントの同期:** 作業完了時は必ず `07_DEV_LOG.md` を更新し、その内容に基づいて `01_AGENT_RECOVERY_MANUAL.md` を最新化すること。
- **過去ログの絶対保護:** 開発ログの更新時に過去の情報を1文字たりとも消去してはならない。整理や美文化を目的とした既存部分の上書きは「重大な過失」とみなす。
- **Gitコミット:** 日本語メッセージとプレフィックス（`feat:`, `fix:`, `docs:`, `test:`, `chore:`, `refactor:` 等）を必ず使用すること。

## 3. 想定される結論

現在のフェーズ: Phase 2: 「鉄壁のフォーム基盤」の構築
完了していること: Phase 1（Laravel 12 / Next.js 15 初期化、Scramble による型同期パイプラインの確立）。
未完了・次のタスク: Zod スキーマの策定、React Hook Form (RHF) の導入、および UI コンポーネント基盤の整備。
